# Jeseci Smart Learning Academy - Minimal Working Version
# This version works without complex Vite setup

# =============================================================================
# BACKEND: OBJECT-SPATIAL PROGRAMMING INFRASTRUCTURE
# =============================================================================

# Learning Concept Node
node LearningConcept {
    has concept_id: str;
    has title: str;
    has description: str;
    has difficulty_level: int = 1;
    has estimated_duration: int = 30;
    has content_type: str = "lesson";
    has mastery_score: float = 0.0;
    has is_locked: bool = True;
}

# User Progress Node
node UserProgress {
    has user_id: str;
    has username: str;
    has current_concept: str = "";
    has overall_mastery: float = 0.0;
    has learning_streak: int = 0;
    has total_concepts_completed: int = 0;
    has achievements: list = [];
}

# =============================================================================
# BACKEND: API WALKERS
# =============================================================================

# System Welcome and Initialization
walker welcome {
    can initialize with `root entry {
        report {
            "message": "Welcome to Jeseci Smart Learning Academy!",
            "status": "initialized",
            "version": "5.0.0",
            "timestamp": "2025-12-21T04:13:49Z",
            "features": [
                "Object-Spatial Programming backend",
                "Learning management system",
                "Progress tracking",
                "Achievement system",
                "Modern responsive UI"
            ]
        };
    }
}

# Health Check
walker health_check {
    can check_health with `root entry {
        report {
            "service": "Jeseci Smart Learning Academy",
            "status": "healthy",
            "version": "5.0.0",
            "architecture": "JAC OSP with Static HTML Frontend",
            "uptime": "operational",
            "timestamp": "2025-12-21T04:13:49Z"
        };
    }
}

# Learning Concepts Management
walker concepts {
    has action: str = "list";
    
    can manage_concepts with `root entry {
        concepts_data = [
            {
                "id": "jac_syntax_mastery",
                "title": "JAC Syntax Mastery",
                "description": "Master the essential syntax of JAC programming language",
                "difficulty": 1,
                "duration": "60 min",
                "progress": 100,
                "status": "completed"
            },
            {
                "id": "osp_fundamentals",
                "title": "Object-Spatial Programming Fundamentals",
                "description": "Deep dive into OSP concepts including nodes, edges, walkers",
                "difficulty": 2,
                "duration": "90 min",
                "progress": 75,
                "status": "in_progress"
            },
            {
                "id": "advanced_walkers",
                "title": "Advanced Walker Patterns and Events",
                "description": "Master complex walker behaviors and traversal patterns",
                "difficulty": 3,
                "duration": "120 min",
                "progress": 0,
                "status": "locked"
            },
            {
                "id": "fullstack_jac",
                "title": "Full Stack JAC Development",
                "description": "Build complete full-stack applications using JAC",
                "difficulty": 4,
                "duration": "180 min",
                "progress": 0,
                "status": "locked"
            }
        ];
        
        report {
            "action": "manage_concepts",
            "concepts": concepts_data,
            "total_count": len(concepts_data),
            "status": "success"
        };
    }
}

# User Progress Management
walker user_progress {
    has action: str = "get_progress";
    
    can get_progress with `root entry {
        report {
            "action": "get_progress",
            "progress": {
                "username": "demo_user",
                "overall_mastery": 45,
                "streak": 7,
                "completed": 2,
                "time_spent": "4h 30m",
                "level": "Intermediate Learner",
                "achievements": ["Syntax Master", "7-Day Streak", "Full Stack Explorer"]
            },
            "status": "success"
        };
    }
}

# =============================================================================
# FRONTEND: SIMPLE HTML PAGE
# =============================================================================

walker serve_app {
    can serve_application with `root entry {
        report {
            "message": "Jeseci Smart Learning Academy - Full Stack Application",
            "status": "ready",
            "version": "5.0.0",
            "features": [
                "Object-Spatial Programming backend",
                "Learning management system", 
                "Progress tracking",
                "Achievement system",
                "Modern responsive UI"
            ],
            "endpoints": {
                "welcome": "/api/walker/welcome",
                "health": "/api/walker/health_check", 
                "concepts": "/api/walker/concepts",
                "progress": "/api/walker/user_progress"
            },
            "ui_status": "HTML frontend ready to serve",
            "access_url": "http://localhost:8000/page/app"
        };
    }
}

# =============================================================================
# SYSTEM INITIALIZATION
# =============================================================================

with entry {
    print("üéì Jeseci Smart Learning Academy - Minimal Working Edition");
    print("üìö JAC with Static HTML Frontend - No Complex Dependencies");
    print("üöÄ Use 'jac serve learning_portal_minimal.jir' to start the server");
    print("‚ú® Features: API endpoints, responsive UI, progress tracking");
    print("üîß Built with pure JAC backend and static HTML frontend");
    print("üåê Access the app at: http://localhost:8000/page/app");
}