(workspace) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ bash backend/database/cleanup_databases.sh
ğŸ§¹ Database Cleanup Script for Jeseci Smart Learning Academy
âš ï¸  WARNING: This will DELETE ALL DATA in the configured databases!

[âœ“] Loaded environment variables from .env

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Current Configuration 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  PostgreSQL:
    Host:     localhost:5432
    Database: jeseci_learning_academy
    User:     jeseci_academy_user
    Schema:   jeseci_academy

  Neo4j:
    URI:      bolt://localhost:7687
    Database: neo4j
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Do you want to proceed with cleanup? (type 'YES' to confirm): YES

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 PostgreSQL Database Cleanup 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
localhost:5432 - accepting connections
[i] Dropping schema 'jeseci_academy' from database 'jeseci_learning_academy'...
 ?column? 
----------
        1
(1 row)

[i] Using DROP SCHEMA method...
AADROP SCHEMA
CREATE SCHEMA
GRANT
ALTER SCHEMA
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
[âœ“] PostgreSQL schema 'jeseci_academy' cleaned successfully with proper ownership
[âœ“] Remaining tables in schema 'jeseci_academy': 0

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Neo4j Graph Database Cleanup 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[i] Attempting to clean Neo4j project data...
2026-01-02 14:29:56 - logger_config - INFO - Logging initialized. Log file: /home/cavin/projects/Jeseci-Smart-Learning-Academy/logs/jeseci_backend_20260102.log
2026-01-02 14:29:56 - logger_config - INFO - Log level: INFO
2026-01-02 14:29:56 - logger_config - INFO - PostgreSQL connection pool initialized: localhost:5432/jeseci_learning_academy
[!] Neo4j connection failed: Couldn't connect to localhost:7687 (resolved to ('127.0.0.1:7687',)):
Failed to establish connection to ResolvedIPv4Address(('127.0.0.1', 7687)) (reason [Errno 111] Connection refused)
[!] Could not connect to Neo4j
    (This is optional - Neo4j Community Edition uses a single database)
    (Project data is organized using labels, so existing data won't conflict)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Database Cleanup Complete!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Next steps:
  1. Run the setup script to create the new schema:
     bash backend/database/setup_databases.sh

  2. Make sure your virtual environment is up to date:
     uv pip install -e backend/

âš ï¸  Remember to recreate any test users or data after setup

(workspace) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ bash backend/database/setup_databases.sh

DATABASE SETUP FOR JESECI SMART LEARNING COMPANION

[INFO] Loading environment variables from backend/config/.env...

============================================================
 PostgreSQL Database Setup 
============================================================

[OK] psql found: /usr/bin/psql
[INFO] Target configuration (from .env):
  Host:     localhost:5432
  Database: jeseci_learning_academy
  User:     jeseci_academy_user

[INFO] Checking PostgreSQL service status...
[OK] PostgreSQL service is running
[INFO] Attempting connection with configured user 'jeseci_academy_user'...
[OK] PostgreSQL connection successful!

============================================================
 Testing PostgreSQL Connection 
============================================================

[OK] PostgreSQL connection successful!

============================================================
 PostgreSQL Tables 
============================================================

[INFO] Checking for existing tables in 'jeseci_learning_academy'...

[INFO] No tables found in database (tables will be created by application)

============================================================
 Creating Database Tables 
============================================================

[INFO] Running database initialization script...

[INFO] Dropping existing schema 'jeseci_academy' to fix any duplicate objects...
DROP SCHEMA
[INFO] Creating schema 'jeseci_academy'...
CREATE SCHEMA
GRANT
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
2026-01-02 14:30:05 - logger_config - INFO - Logging initialized. Log file: /home/cavin/projects/Jeseci-Smart-Learning-Academy/logs/jeseci_backend_20260102.log
2026-01-02 14:30:05 - logger_config - INFO - Log level: INFO
2026-01-02 14:30:05 - logger_config - INFO - PostgreSQL connection pool initialized: localhost:5432/jeseci_learning_academy
2026-01-02 14:30:05 - logger_config - INFO - ============================================================
2026-01-02 14:30:05 - logger_config - INFO - DATABASE INITIALIZATION
2026-01-02 14:30:05 - logger_config - INFO - ============================================================
2026-01-02 14:30:05 - logger_config - INFO - Connected to PostgreSQL: localhost:5432/jeseci_learning_academy
2026-01-02 14:30:05 - logger_config - INFO - Creating user-related tables...
2026-01-02 14:30:05 - logger_config - INFO - âœ“ User tables created: users, user_profile, user_learning_preferences, password_reset_tokens
2026-01-02 14:30:05 - logger_config - INFO - Creating content-related tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Content tables created: concepts, concept_content, learning_paths, lessons, learning_path_concepts, lesson_concepts
2026-01-02 14:30:06 - logger_config - INFO - Creating courses table...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Courses tables created: courses, course_concepts
2026-01-02 14:30:06 - logger_config - INFO - Creating progress tracking tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Progress tables created: user_concept_progress, user_learning_paths, user_lesson_progress, learning_sessions
2026-01-02 14:30:06 - logger_config - INFO - Creating assessment tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Assessment tables created: quizzes, quiz_attempts
2026-01-02 14:30:06 - logger_config - INFO - Creating gamification tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Gamification tables created: achievements, user_achievements, badges, user_badges
2026-01-02 14:30:06 - logger_config - INFO - Creating system tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ System tables created: system_logs, system_health
2026-01-02 14:30:06 - logger_config - INFO - Creating AI-related tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ AI tables created: ai_agents, ai_generated_content, ai_usage_stats
2026-01-02 14:30:06 - logger_config - INFO - Creating content views tracking table...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Content views tables created: content_views, content_views_summary
2026-01-02 14:30:06 - logger_config - INFO - Creating domains table...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Domains table created with default data
2026-01-02 14:30:06 - logger_config - INFO - Creating sync engine tables...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Sync engine tables created: sync_event_log, sync_status, sync_conflicts, reconciliation_runs
2026-01-02 14:30:06 - logger_config - INFO - Creating sync engine indexes...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Sync engine indexes created
2026-01-02 14:30:06 - logger_config - INFO - Creating database indexes...
2026-01-02 14:30:06 - logger_config - INFO - âœ“ Database indexes created
2026-01-02 14:30:06 - logger_config - INFO - 
2026-01-02 14:30:06 - logger_config - INFO - ============================================================
2026-01-02 14:30:06 - logger_config - INFO - âœ“ ALL DATABASE TABLES CREATED SUCCESSFULLY!
2026-01-02 14:30:06 - logger_config - INFO - ============================================================

[OK] All database tables created successfully!

[OK] PostgreSQL setup completed successfully

============================================================
 Neo4j Graph Database Setup 
============================================================

[OK] Neo4j is running and accessible
[INFO] Target configuration (from .env):
  URI:       bolt://localhost:7687
  Database: neo4j
  User:     neo4j

[INFO] Testing Neo4j connection...
(workspace) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ 