(venv) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ bash backend/database/setup_databases.sh

ğŸ—„ï¸  Database Setup for Jeseci Smart Learning Companion

[i] Loading environment variables from backend/config/.env...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 PostgreSQL Database Setup 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[âœ“] psql found: /usr/bin/psql
[i] Target configuration (from .env):
  \033[0;36mHost:\033[0m     localhost:5432
  \033[0;36mDatabase:\033[0m jeseci_learning_academy
  \033[0;36mUser:\033[0m     jeseci_academy_user

[i] Checking PostgreSQL service status...
[sudo] password for cavin: 
[âœ“] PostgreSQL service is running
[i] Attempting connection with configured user 'jeseci_academy_user'...
[âœ—] Could not connect as user 'jeseci_academy_user' to database 'jeseci_learning_academy'
[!] This usually means:
  1. The user 'jeseci_academy_user' doesn't exist yet, OR
  2. The password for user 'jeseci_academy_user' doesn't match POSTGRES_PASSWORD in .env

[i] If the user already exists with a different password, recreate it with:
  \033[0;36msudo -u postgres psql -c "DROP USER IF EXISTS jeseci_academy_user;"\033[0m


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Creating PostgreSQL User and Database 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[i] Using configuration values from your .env file...

[i] Attempting to create user and database automatically...

DO
[âœ“] User 'jeseci_academy_user' created or already exists
CREATE DATABASE
[âœ“] Database 'jeseci_learning_academy' created successfully
GRANT
GRANT


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Testing PostgreSQL Connection 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[âœ“] PostgreSQL connection successful!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 PostgreSQL Tables 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[i] Checking for existing tables in 'jeseci_learning_academy'...

[i] No tables found in database (tables will be created by application)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Creating Database Tables 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[i] Running database migrations using SQLAlchemy...

[i] Ensuring public schema exists...
INFO:database:PostgreSQL connection pool initialized: localhost:5432/jeseci_learning_academy
Traceback (most recent call last):
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DuplicateTable: relation "idx_ulp_user_id" already exists


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 40, in <module>
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 5928, in create_all
    bind._run_ddl_visitor(
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3260, in _run_ddl_visitor
    conn._run_ddl_visitor(visitorcallable, element, **kwargs)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2467, in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py", line 984, in visit_metadata
    self.traverse_single(
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py", line 1026, in visit_table
    self.traverse_single(index, create_ok=True)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py", line 1063, in visit_index
    CreateIndex(index)._invoke_with(self.connection)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py", line 321, in _invoke_with
    return bind.execute(self)
           ^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateTable) relation "idx_ulp_user_id" already exists

[SQL: CREATE INDEX idx_ulp_user_id ON user_lesson_progress (user_id)]
(Background on this error at: https://sqlalche.me/e/20/f405)
(venv) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ 