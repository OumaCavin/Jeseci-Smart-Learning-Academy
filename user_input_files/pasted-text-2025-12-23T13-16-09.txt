(venv) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ bash backend/database/setup_databases.sh

ğŸ—„ï¸  Database Setup for Jeseci Smart Learning Companion

[i] Loading environment variables from .env...

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 PostgreSQL Database Setup 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[âœ“] psql found: /usr/bin/psql
[i] Target configuration (from .env):
  \033[0;36mHost:\033[0m     localhost:5432
  \033[0;36mDatabase:\033[0m jeseci_learning_academy
  \033[0;36mUser:\033[0m     jeseci_user

[i] Checking PostgreSQL service status...
[sudo] password for cavin: 
[âœ“] PostgreSQL service is running
[i] Attempting connection with configured user 'jeseci_user'...
[âœ“] PostgreSQL connection successful!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Testing PostgreSQL Connection 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[âœ“] PostgreSQL connection successful!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 PostgreSQL Tables 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[i] Checking for existing tables in 'jeseci_learning_academy'...

[i] No tables found in database (tables will be created by application)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Creating Database Tables 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[i] Running database migrations using SQLAlchemy...

[INFO] Database URL constructed: postgresql+psycopg2://jeseci_user:***@localhost:5432/jeseci_learning_academy
[INFO] SQLAlchemy engine created successfully
INFO:database:PostgreSQL connection pool initialized: localhost:5432/jeseci_learning_academy
[INFO] Database URL constructed: postgresql+psycopg2://jeseci_user:***@localhost:5432/jeseci_learning_academy
[INFO] SQLAlchemy engine created successfully
Traceback (most recent call last):
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 4335, in _col_expressions
    parent.c[col] if isinstance(col, str) else col
    ~~~~~~~~^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1642, in __getitem__
    return self._index[key][1]
           ~~~~~~~~~~~^^^^^
KeyError: 'concept_id'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<string>", line 7, in <module>
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/backend/database/models.py", line 466, in <module>
    class QuizAttempt(Base):
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/orm/decl_api.py", line 846, in __init_subclass__
    _as_declarative(cls._sa_registry, cls, cls.__dict__)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 245, in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 326, in setup_mapping
    return _ClassScanMapperConfig(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 577, in __init__
    self._setup_table(table)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 1762, in _setup_table
    table_cls(
  File "<string>", line 2, in __new__
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 429, in __new__
    return cls._new(*args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 483, in _new
    with util.safe_reraise():
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 479, in _new
    table.__init__(name, metadata, *args, _no_init=False, **kw)  # type: ignore[misc] # noqa: E501
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 873, in __init__
    self._init_items(
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 233, in _init_items
    spwd(self, **kw)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 1347, in _set_parent_with_dispatch
    self._set_parent(parent, **kw)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 5299, in _set_parent
    ColumnCollectionMixin._set_parent(self, table)
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 4348, in _set_parent
    for col in self._col_expressions(parent):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cavin/projects/Jeseci-Smart-Learning-Academy/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py", line 4339, in _col_expressions
    raise exc.ConstraintColumnNotFoundError(
sqlalchemy.exc.ConstraintColumnNotFoundError: Can't create Index on table 'quiz_attempts': no column named 'concept_id' is present.
(venv) cavin@DESKTOP-KR7GL8A:~/projects/Jeseci-Smart-Learning-Academy$ 